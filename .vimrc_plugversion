" =============================================================================
" âœ¨ Raspberry Pi 5 + D2Coding + Vim ê°œë°œí™˜ê²½ ì„¤ì • íŒŒì¼ (.vimrc)
" ğŸ“Œ ì£¼ìš” ì–¸ì–´: Bash, Python, C, C++
" ğŸ“Œ í°íŠ¸: D2Coding (Nerd Font ë¶ˆí•„ìš”)
" ğŸ“¦ í•„ìˆ˜ êµ¬ì„±ìš”ì†Œ: ìë™ì™„ì„±(coc.nvim), í¬ë§·í„°, ìƒíƒœì¤„, Git, í…Œë§ˆ, íƒìƒ‰ê¸°
" ğŸ“Œ ì²˜ìŒ Vim ì„¤ì •í•˜ëŠ” ì‚¬ëŒë„ ì‰½ê²Œ ë”°ë¼í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±ë¨
" =============================================================================

" =============================================================================
" ğŸš€ ì„¤ì¹˜ ìˆœì„œ: ë°˜ë“œì‹œ ì´ ìˆœì„œëŒ€ë¡œ ë”°ë¼ì•¼ ì œëŒ€ë¡œ ì‘ë™í•©ë‹ˆë‹¤!
" =============================================================================
"
" â–¶ï¸ [1ë‹¨ê³„] í„°ë¯¸ë„ì—ì„œ ì‹œìŠ¤í…œ í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
"
"     sudo apt update
"     sudo apt install -y vim nodejs npm clang-format
"
" â–¶ï¸ [2ë‹¨ê³„] Python í¬ë§·í„° ì„¤ì¹˜ (black, isort)
"
"     python3 -m pip install --break-system-packages black isort
"
" â–¶ï¸ [3ë‹¨ê³„] í”ŒëŸ¬ê·¸ì¸ ë§¤ë‹ˆì € vim-plug ì„¤ì¹˜
"
"     curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
"       https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
"
" â–¶ï¸ [4ë‹¨ê³„] ì´ .vimrc ì €ì¥ í›„ Vimì„ ë°˜ë“œì‹œ **ì™„ì „íˆ ì¢…ë£Œ**í•œ ë’¤ ë‹¤ì‹œ ì‹¤í–‰í•˜ì„¸ìš”!
"           âš ï¸ ì¬ì‹œì‘í•˜ì§€ ì•Šìœ¼ë©´ PlugInstall ëª…ë ¹ì´ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
"
" â–¶ï¸ [5ë‹¨ê³„] Vim ë‹¤ì‹œ ì‹¤í–‰ í›„ ëª…ë ¹ì–´ ì…ë ¥:
"
"     :PlugInstall
"
" â–¶ï¸ [6ë‹¨ê³„] í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜ ì™„ë£Œ í›„ ì–¸ì–´ ìë™ì™„ì„±ìš© ì„œë²„ ì„¤ì¹˜:
"
"     :CocInstall coc-python coc-clangd
"
" =============================================================================

" =============================================================================
" â–‘â–’â–“ 1. í”ŒëŸ¬ê·¸ì¸ ëª©ë¡ (vim-plug ì‚¬ìš©)
" =============================================================================
call plug#begin('~/.vim/plugged')

" ğŸ¨ í…Œë§ˆ - ëˆˆì— í¸í•œ ë‹¤í¬í†¤ ì»¬ëŸ¬ í…Œë§ˆ
Plug 'sainnhe/everforest'

" ğŸ“ íŒŒì¼ íƒìƒ‰ê¸° (F2ë¡œ ì—´ê³  ë‹«ê¸°)
Plug 'preservim/nerdtree'

" ğŸ–¼ ì•„ì´ì½˜ í‘œì‹œ (Nerd Font ì‚¬ìš© ì‹œ íš¨ê³¼ ìˆìŒ / D2Codingì€ ì¼ë¶€ ë¯¸ì§€ì›)
Plug 'ryanoasis/vim-devicons'

" ğŸ§  ìë™ì™„ì„± / LSP (Node.js ê¸°ë°˜)
Plug 'neoclide/coc.nvim', {'branch': 'release'}

" ğŸ”§ Git ì—°ë™ - ìƒíƒœ, commit, blame, log ë“±
Plug 'tpope/vim-fugitive'

" ğŸ“Š ìƒíƒœì¤„ í”ŒëŸ¬ê·¸ì¸ - ëª¨ë“œ, íŒŒì¼ëª…, ë¸Œëœì¹˜ ë“± í‘œì‹œ
Plug 'itchyny/lightline.vim'

" ğŸŒˆ ë¬¸ë²• ê°•ì¡° - ë‹¤ì–‘í•œ ì–¸ì–´ ì§€ì›
Plug 'sheerun/vim-polyglot'

" ğŸ§² ê´„í˜¸ ìë™ì™„ì„± + ì¤‘ì²© ìƒ‰ìƒ
Plug 'jiangmiao/auto-pairs'
Plug 'luochen1990/rainbow'

" âœ¨ ì½”ë“œ í¬ë§·í„° (black, clang-format ë“± ì‹¤í–‰)
Plug 'Chiel92/vim-autoformat'

call plug#end()

" =============================================================================
" â–‘â–’â–“ 2. ê¸°ë³¸ í¸ì˜ ì„¤ì •
" =============================================================================
set number                      " ì¤„ ë²ˆí˜¸ í‘œì‹œ
set relativenumber             " ìƒëŒ€ ì¤„ ë²ˆí˜¸ í‘œì‹œ
set cursorline                 " í˜„ì¬ ì¤„ ê°•ì¡°
syntax enable                  " ë¬¸ë²• ê°•ì¡° í™œì„±í™”
filetype plugin indent on      " íŒŒì¼ í˜•ì‹ ê¸°ë°˜ ìë™ ë“¤ì—¬ì“°ê¸°
set background=dark            " í…Œë§ˆìš© ë‹¤í¬ ë°°ê²½ ì„¤ì •
set termguicolors              " TrueColor ì§€ì›
set laststatus=2               " í•­ìƒ ìƒíƒœì¤„ í‘œì‹œ

" =============================================================================
" â–‘â–’â–“ 3. í…Œë§ˆ ì„¤ì •
" =============================================================================
colorscheme everforest
let g:everforest_background = 'medium'     " 'soft', 'medium', 'hard' ì¤‘ ì„ íƒ

" =============================================================================
" â–‘â–’â–“ 4. ë‹¨ì¶•í‚¤ ì„¤ì •
" =============================================================================
nnoremap <F2> :NERDTreeToggle<CR>          " F2: íŒŒì¼ íƒìƒ‰ê¸° í† ê¸€
nnoremap <F3> :Autoformat<CR>              " F3: ì½”ë“œ í¬ë§· ì‹¤í–‰

" =============================================================================
" â–‘â–’â–“ 5. ì½”ë“œ í¬ë§·í„° ì„¤ì •
" =============================================================================
" â–¶ï¸ Python: black, isort
" â–¶ï¸ C/C++: clang-format
let g:formatdef_black = '"black --quiet -"'
let g:formatters_python = ['black']
let g:formatters_c = ['clang-format']
let g:formatters_cpp = ['clang-format']

" =============================================================================
" â–‘â–’â–“ 6. ìë™ì™„ì„± ì„¤ì • (coc.nvim)
" =============================================================================
" â–¶ï¸ Tab í‚¤ë¡œ ìë™ì™„ì„± ì„ íƒ
inoremap <silent><expr> <Tab> pumvisible() ? "\<C-n>" : "\<Tab>"

" =============================================================================
" â–‘â–’â–“ 7. ìƒíƒœì¤„ ì„¤ì • (lightline + ASCII ì½”ë“œê¹Œì§€ í‘œì‹œ)
" =============================================================================
let g:lightline = {
  \ 'colorscheme': 'everforest',
  \ 'active': {
  \   'left': [ [ 'mode' ], [ 'filename', 'modified' ] ],
  \   'right': [ [ 'lineinfo' ],
  \              [ 'fileformat', 'fileencoding', 'filetype' ],
  \              [ 'gitbranch' ] ]
  \ },
  \ 'component_function': {
  \   'gitbranch': 'FugitiveHead',
  \   'lineinfo': 'LightLineLineInfo'
  \ }
\ }

" â–¶ï¸ ìƒíƒœì¤„ì— ì»¤ì„œ ìœ„ì¹˜ + í•´ë‹¹ ë¬¸ìì˜ ASCII ì½”ë“œ ì¶œë ¥
function! LightLineLineInfo()
  let l:line = line('.')
  let l:col = col('.')
  let l:char = getline('.')[l:col - 1]
  if l:char == ''
    return l:line . ':' . l:col
  endif
  let l:code = char2nr(l:char)
  return l:line . ':' . l:col . '  0x' . printf('%02X', l:code) . ' (' . l:code . ')'
endfunction
